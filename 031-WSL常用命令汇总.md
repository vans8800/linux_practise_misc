## 背景
---

基于win11 蓝图笔记本构建的WSL+Ubuntu作为基础验证环境，来构建大模型微调、推理等环境。这里以总览视角掌握wsl命令的常见使用方法。

## 快捷操作
---

Windows Subsystem for Linux (WSL) 的命令可以帮助你高效地管理Linux子系统。下面这个表格整理了最常见的WSL命令及其用法，方便你快速查阅。


| 功能类别         | 命令示例                                          | 参数说明及用途                                               |
| :--------------- | :------------------------------------------------ | :----------------------------------------------------------- |
| **🔍 发行版管理** | `wsl --list --online`                             | 列出所有可从在线应用商店安装的Linux发行版。                  |
|                  | `wsl --list --verbose`(或 `wsl -l -v`)            | 详细列出已安装的所有发行版，包括其**名称、状态和运行的WSL版本（1或2）**。 |
|                  | `wsl --install -d <发行版名称>`                   | 安装指定的Linux发行版，例如 `wsl --install -d Ubuntu`。      |
|                  | `wsl --set-default <发行版名称>`                  | 将指定发行版设置为**默认发行版**，之后直接输入`wsl`命令会进入该系统。 |
|                  | `wsl --unregister <发行版名称>`                   | **卸载**指定的发行版，会删除其所有数据和配置。               |
| **🚀 运行与控制** | `wsl`                                             | **启动默认的Linux发行版**并进入其Shell环境。                 |
|                  | `wsl --distribution <发行版名称>`(或 `wsl -d`)    | 启动指定的发行版，例如 `wsl -d Ubuntu-22.04`。               |
|                  | `wsl --shutdown`                                  | **立即终止所有正在运行的发行版和WSL 2虚拟机**，相当于彻底关闭WSL服务。 |
|                  | `wsl --terminate <发行版名称>`(或 `wsl -t`)       | 终止（关闭）某个特定的发行版。                               |
| **👤 用户与权限** | `wsl --user <用户名>`(或 `wsl -u`)                | 以指定的用户身份运行Linux发行版，例如 `wsl -u root`以**root管理员身份**运行。 |
|                  | `<发行版名称>.exe config --default-user <用户名>` | 更改某个发行版的**默认登录用户**。例如，`ubuntu2204.exe config --default-user root`。 |
| **💻 执行命令**   | `wsl <Linux命令>`                                 | 在Windows命令提示符或PowerShell中**直接执行单条Linux命令**。例如：`wsl ls -l`。 |
|                  | `wsl --cd <目录路径>`                             | 设置命令执行的**当前工作目录**。可以接受Linux路径（如`/home`）或Windows绝对路径（如`C:\Users`）。 |
| **💾 磁盘与文件** | `wsl --export <发行版名称> <文件路径>`            | 将指定发行版**导出**为一个tar格式的备份文件，用于备份或迁移。 |
|                  | `wsl --import <发行版名称> <安装位置> <备份文件>` | 将之前导出的备份文件**导入**为一个新的发行版。               |
|                  | `wslpath "C:\Users\..."`                          | 将Windows文件路径转换为WSL中的路径格式，方便在子系统内访问Windows文件。 |
| **⚙️ 系统维护**   | `wsl --update`                                    | **手动更新WSL内核**到最新版本。                              |
|                  | `wsl --status`                                    | 查看WSL的**总体状态**，包括默认版本、内核版本和最后一次更新日期等信息。 |
|                  | `wsl --set-default-version 2`                     | 设置**新安装发行版的默认WSL版本**（1或2），推荐设置为WSL 2以获得更完整的Linux体验。 |
|                  | `wsl --set-version <发行版名称> 2`                | 将**已安装的发行版从WSL 1转换为WSL 2**，这个过程可能需要几分钟。 |


### 💡 使用技巧与注意事项

- **获取帮助**：任何时候忘记命令，都可以在终端输入 `wsl --help`来查看完整的帮助信息


- **管理员权限**：部分命令（如安装、导入导出发行版或修改系统级设置）可能需要以**管理员身份**运行Windows终端（PowerShell或命令提示符）


- **WSL 2的优势**：WSL 2使用真正的Linux内核，在性能（尤其是文件I/O和 Docker 兼容性）上远超WSL 1。建议将新安装的发行版设置为WSL 2版本


- **文件系统互访**：你可以在WSL中通过`/mnt/c/`这样的路径访问Windows的C盘，反之亦然，这种集成非常方便。
